(function(c){function f(a){if("undefined"!=typeof a.content){if("object"==typeof b&&b.dialog("isOpen")){var f=JIG_VC.obj;JIG_VC.hotSwap=!0;b.dialog("close");JIG_VC.obj=f}JIG_VC.frontend="undefined"!==typeof window.InlineShortcodeView?!0:!1;JIG_VC.params=a;JIG_VC.shortcodeSnapshot=a.content;if("object"!==typeof b){if(b=c('<div id="jig-sce-jquery-ui-dialog"></div>').append(d).appendTo("body").dialog({id:"jig-sce-jquery-ui-dialog",width:900,height:550,resizable:!1,open:function(){"undefined"!==typeof d[0].contentWindow.editShortcodeFromVC&&
(d[0].contentWindow.editShortcodeFromVC(),d[0].contentWindow.scrollTo(0,0));if(JIG_VC.frontend){var a=c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]');a.offset().top+a.height()>c(window).height()&&a.css({top:"auto",bottom:"20px",height:"auto"})}"undefined"!==typeof d[0].contentWindow.detectVC&&d[0].contentWindow.detectVC();JIG_VC.prevObj=JIG_VC.obj},close:function(){"undefined"!==typeof d[0].contentWindow.resetSCE&&d[0].contentWindow.resetSCE();"undefined"==typeof JIG_VC.shortcode&&("undefined"==
typeof JIG_VC.hotSwap?JIG_VC.obj.model.save("params",{content:JIG_VC.shortcodeSnapshot}):JIG_VC.prevObj.model.save("params",{content:JIG_VC.shortcodeSnapshot}));g=!1;c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]').removeClass("previewingShortcode").find(".ui-dialog-titlebar-collapsed").click();JIG_VC={}}}),JIG_VC.frontend){var e=c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]'),k=e.height(),l=e.find(".ui-dialog-titlebar"),h=!1;a=c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"] .ui-dialog-titlebar-close');
a=a.clone().insertBefore(a).attr("class","ui-dialog-titlebar-minimize");c.extend(c.easing,{JIGswing:function(a){return.5-Math.cos(a*Math.PI)/2},JIGeaseInOutQuad:function(a){return.5>a?2*a*a:1-Math.pow(-2*a+2,2)/2}});a.on("click",function(){c(this);if(!h&&!b.is(":animated"))e.css("height","auto"),b.data("originalHeight",b.height()),l.addClass("ui-dialog-titlebar-collapsed"),b.animate({height:0,opacity:0},300,"JIGeaseInOutQuad",function(){h=!0});else if(!b.is(":animated")){var a=c(window).height();
e.offset().top+k>a&&e.css("bottom",function(){return a-e.offset().top-e.outerHeight()}).css({top:"auto",height:"auto"});b.animate({height:b.data("originalHeight"),opacity:1},300,"JIGeaseInOutQuad",function(){e.height(k);l.removeClass("ui-dialog-titlebar-collapsed");h=!1})}})}}else b.dialog("open")}}window.JIG_VC={};window.VcJustifiedImageGrid=vc.shortcode_view.extend({render:function(){JIG_VC.obj=this;vc.add_element_block_view.$el.hasClass("vc_active")&&f(this.model.get("params"));window.VcJustifiedImageGrid.__super__.render.call(this);
return this},editElement:function(a){JIG_VC.obj=this;f(this.model.get("params"));return!1}});if("undefined"!==typeof window.InlineShortcodeView){var g=!1;jQuery(window).on("vc_build",function(){vc.add_element_block_view.$el.find('[data-element="jig_vc"]').on("click",function(){g=!0})});window.InlineShortcodeView_jig_vc=window.InlineShortcodeView.extend({render:function(){window.InlineShortcodeView_jig_vc.__super__.render.call(this);g&&(JIG_VC.obj=this,f(this.model.get("params")));return this},edit:function(a){JIG_VC.obj=
this;f(this.model.get("params"));return!1},update:function(a){g=!1;window.InlineShortcodeView_jig_vc.__super__.update.call(this,a);return this}})}var b,m=ajaxurl+(-1==ajaxurl.indexOf("?")?"?":"&")+"action=jig_shortcode_editor",d=c('<iframe frameborder="0" marginwidth="0" marginheight="0"></iframe>');d.attr({src:m});c("body").on("click",'.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]',function(a){c(a.target).is(".ui-dialog")&&b.dialog("close")})})(jQuery);